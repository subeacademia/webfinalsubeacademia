<div class="ares-ai-graph-container">
  <div class="graph-section">
    <svg 
      class="ares-ai-svg" 
      viewBox="0 0 600 600" 
      xmlns="http://www.w3.org/2000/svg"
      (click)="clearSelection()"
    >
      <!-- Definiciones de gradientes -->
      <defs>
        <!-- Gradiente central -->
        <radialGradient id="centerGradient" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#1E40AF" />
          <stop offset="100%" stop-color="#3B82F6" />
        </radialGradient>
        
        <!-- Filtros para efectos -->
        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
          <feMerge> 
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        
        <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000000" flood-opacity="0.3"/>
        </filter>
      </defs>

      <!-- Fases del framework (arcos exteriores) -->
      <g class="phases">
        <path 
          *ngFor="let phase of getPhases()"
          [attr.d]="getPhasePath(phase)"
          [attr.fill]="phase.color"
          class="phase-path clickable"
          [class.active]="isActive(phase)"
          (click)="selectElement(phase)"
          [attr.stroke]="isActive(phase) ? '#FFFFFF' : '#1F2937'"
          [attr.stroke-width]="isActive(phase) ? '4' : '2'"
          [attr.filter]="isActive(phase) ? 'url(#glow)' : 'url(#shadow)'"
          opacity="0.9"
        />
      </g>

      <!-- Etiquetas de las fases -->
      <g class="phase-labels">
        <text 
          *ngFor="let phase of getPhases(); let i = index"
          [attr.x]="getPhaseLabelPosition(phase).x"
          [attr.y]="getPhaseLabelPosition(phase).y"
          class="phase-label clickable"
          [class.active]="isActive(phase)"
          (click)="selectElement(phase)"
          fill="white" 
          font-size="16" 
          font-weight="bold"
          text-anchor="middle"
          dominant-baseline="middle"
          filter="url(#shadow)"
        >
          {{ i + 1 }}
        </text>
        
        <!-- Nombres de las fases -->
        <text 
          *ngFor="let phase of getPhases()"
          [attr.x]="getPhaseLabelPosition(phase).x"
          [attr.y]="getPhaseLabelPosition(phase).y + 25"
          class="phase-name clickable"
          [class.active]="isActive(phase)"
          (click)="selectElement(phase)"
          fill="white" 
          font-size="12" 
          font-weight="600"
          text-anchor="middle"
          dominant-baseline="middle"
          filter="url(#shadow)"
        >
          {{ phase.name.split(' ')[0] }}
        </text>
      </g>

      <!-- Principios (arcos interiores) -->
      <g class="principles">
        <path 
          *ngFor="let principle of getPrinciples()"
          [attr.d]="getPrinciplePath(principle)"
          [attr.fill]="principle.color"
          class="principle-path clickable"
          [class.active]="isActive(principle)"
          (click)="selectElement(principle)"
          [attr.stroke]="isActive(principle) ? '#FFFFFF' : '#1F2937'"
          [attr.stroke-width]="isActive(principle) ? '3' : '1.5'"
          [attr.filter]="isActive(principle) ? 'url(#glow)' : 'url(#shadow)'"
          opacity="0.85"
        />
      </g>

      <!-- Etiquetas de los principios -->
      <g class="principle-labels">
        <text 
          *ngFor="let principle of getPrinciples()"
          [attr.x]="getPrincipleLabelPosition(principle).x"
          [attr.y]="getPrincipleLabelPosition(principle).y"
          class="principle-label clickable"
          [class.active]="isActive(principle)"
          (click)="selectElement(principle)"
          fill="white" 
          font-size="14" 
          font-weight="bold"
          text-anchor="middle"
          dominant-baseline="middle"
          filter="url(#shadow)"
        >
          {{ principle.icon }}
        </text>
        
        <!-- Nombres de los principios -->
        <text 
          *ngFor="let principle of getPrinciples()"
          [attr.x]="getPrincipleLabelPosition(principle).x"
          [attr.y]="getPrincipleLabelPosition(principle).y + 20"
          class="principle-name clickable"
          [class.active]="isActive(principle)"
          (click)="selectElement(principle)"
          fill="white" 
          font-size="10" 
          font-weight="600"
          text-anchor="middle"
          dominant-baseline="middle"
          filter="url(#shadow)"
        >
          {{ principle.name }}
        </text>
      </g>

      <!-- Núcleo central dinámico -->
      <g class="center-core">
        <!-- Círculo de fondo -->
        <circle 
          cx="300" cy="300" r="50" 
          fill="url(#centerGradient)" 
          class="center-circle"
          filter="url(#shadow)"
        />
        
        <!-- Contenido del núcleo central -->
        <g class="core-content" [class.fade-out]="activeElement">
          <!-- Estado inicial: Logo ARES AI -->
          <g *ngIf="!activeElement" class="initial-content">
            <text x="300" y="290" text-anchor="middle" class="ares-title" fill="white" font-size="18" font-weight="bold">
              ARES AI
            </text>
            <text x="300" y="310" text-anchor="middle" class="ares-subtitle" fill="white" font-size="12" opacity="0.9">
              Framework
            </text>
          </g>
          
          <!-- Estado activo: Información detallada -->
          <foreignObject 
            *ngIf="activeElement"
            x="200" y="250" 
            width="200" height="100"
            class="detail-content"
          >
            <div xmlns="http://www.w3.org/1999/xhtml" class="detail-container">
              <h3 class="detail-title">{{ activeElement.name }}</h3>
              <p class="detail-summary">{{ activeElement.summary }}</p>
              <ul class="detail-list">
                <li *ngFor="let detail of activeElement.details">{{ detail }}</li>
              </ul>
            </div>
          </foreignObject>
        </g>
      </g>

      <!-- Indicadores de interacción -->
      <g class="interaction-hints" *ngIf="!activeElement">
        <circle cx="300" cy="50" r="8" fill="#6B7280" opacity="0.6">
          <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
        </circle>
        <text x="300" y="70" text-anchor="middle" fill="#6B7280" font-size="12" opacity="0.8">
          Haz clic en las fases o principios
        </text>
      </g>
    </svg>
  </div>

  <!-- Panel de información lateral -->
  <div class="info-panel" *ngIf="!activeElement">
    <div class="info-content">
      <div class="default-info">
        <h3 class="info-title">Framework ARES-AI</h3>
        <p class="info-description">
          Haz clic en cualquier fase o principio del gráfico para obtener información detallada sobre el Framework ARES-AI.
        </p>
        <div class="info-highlights">
          <div class="highlight-item">
            <span class="highlight-icon">🎯</span>
            <span>5 fases metodológicas</span>
          </div>
          <div class="highlight-item">
            <span class="highlight-icon">⚖️</span>
            <span>4 principios transversales</span>
          </div>
          <div class="highlight-item">
            <span class="highlight-icon">🚀</span>
            <span>Enfoque iterativo y adaptativo</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
