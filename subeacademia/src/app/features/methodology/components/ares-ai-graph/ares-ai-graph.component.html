<div class="ares-ai-graph-container">
  <div class="graph-section">
    <svg 
      class="ares-ai-svg" 
      viewBox="0 0 500 500" 
      xmlns="http://www.w3.org/2000/svg"
      (click)="clearSelection()"
    >
      <!-- Definiciones de gradientes -->
      <defs>
        <!-- Gradiente central -->
        <radialGradient id="centerGradient" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#1E40AF" />
          <stop offset="100%" stop-color="#3B82F6" />
        </radialGradient>
        
        <!-- Gradientes para cada fase -->
        <linearGradient id="fase1Gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#3B82F6" />
          <stop offset="100%" stop-color="#1D4ED8" />
        </linearGradient>
        
        <linearGradient id="fase2Gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#8B5CF6" />
          <stop offset="100%" stop-color="#7C3AED" />
        </linearGradient>
        
        <linearGradient id="fase3Gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#06B6D4" />
          <stop offset="100%" stop-color="#0891B2" />
        </linearGradient>
        
        <linearGradient id="fase4Gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#10B981" />
          <stop offset="100%" stop-color="#059669" />
        </linearGradient>
        
        <linearGradient id="fase5Gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#F59E0B" />
          <stop offset="100%" stop-color="#D97706" />
        </linearGradient>

        <!-- Filtros para efectos -->
        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
          <feMerge> 
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>

      <!-- Fases del framework (arcos exteriores) -->
      <g class="phases">
        <path 
          *ngFor="let phase of phases"
          [attr.d]="getPhasePath(phase)"
          [attr.fill]="phase.color"
          class="phase-path clickable"
          [class.selected]="isPhaseSelected(phase.id)"
          (click)="selectPhase(phase.id)"
          [attr.stroke]="isPhaseSelected(phase.id) ? '#FFFFFF' : '#1F2937'"
          [attr.stroke-width]="isPhaseSelected(phase.id) ? '3' : '2'"
          [attr.filter]="isPhaseSelected(phase.id) ? 'url(#glow)' : 'none'"
        />
      </g>

      <!-- Etiquetas de las fases -->
      <g class="phase-labels">
        <text 
          *ngFor="let phase of phases; let i = index"
          [attr.x]="getPhaseLabelPosition(phase).x"
          [attr.y]="getPhaseLabelPosition(phase).y"
          class="phase-label clickable"
          [class.selected]="isPhaseSelected(phase.id)"
          (click)="selectPhase(phase.id)"
          fill="white" 
          font-size="14" 
          font-weight="bold"
          text-anchor="middle"
          dominant-baseline="middle"
        >
          {{ i + 1 }}
        </text>
      </g>

      <!-- Círculo central con principios -->
      <g class="center-principles">
        <!-- Círculo de fondo -->
        <circle 
          cx="250" cy="250" r="80" 
          fill="url(#centerGradient)" 
          class="center-circle"
          [class.selected]="selectedElement && ['agilidad', 'responsabilidad', 'etica', 'sostenibilidad'].includes(selectedElement)"
        />
        
        <!-- Título ARES AI -->
        <text x="250" y="240" text-anchor="middle" class="ares-title" fill="white" font-size="18" font-weight="bold">
          ARES AI
        </text>
        
        <!-- Principios alrededor del círculo central -->
        <g class="principles">
          <g 
            *ngFor="let principle of principles; let i = index"
            class="principle-group clickable"
            [class.selected]="isPrincipleSelected(principle.id)"
            (click)="selectPrinciple(principle.id)"
          >
            <!-- Ícono del principio -->
            <text 
              [attr.x]="getPrinciplePosition(i).x"
              [attr.y]="getPrinciplePosition(i).y - 15"
              text-anchor="middle"
              class="principle-icon"
              fill="white"
              font-size="20"
            >
              {{ principle.icon }}
            </text>
            
            <!-- Nombre del principio -->
            <text 
              [attr.x]="getPrinciplePosition(i).x"
              [attr.y]="getPrinciplePosition(i).y + 10"
              text-anchor="middle"
              class="principle-text"
              fill="white"
              font-size="11"
              font-weight="600"
            >
              {{ principle.name }}
            </text>
          </g>
        </g>
      </g>

      <!-- Indicadores de interacción -->
      <g class="interaction-hints">
        <circle cx="250" cy="50" r="8" fill="#6B7280" opacity="0.6">
          <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
        </circle>
        <text x="250" y="70" text-anchor="middle" fill="#6B7280" font-size="10" opacity="0.8">
          Haz clic en las fases o principios
        </text>
      </g>
    </svg>
  </div>

  <!-- Panel de información -->
  <div class="info-panel">
    <div class="info-content">
      <div *ngIf="!getSelectedInfo()" class="default-info">
        <h3 class="info-title">Framework ARES-AI</h3>
        <p class="info-description">
          Haz clic en cualquier fase o principio del gráfico para obtener información detallada sobre el Framework ARES-AI.
        </p>
        <div class="info-highlights">
          <div class="highlight-item">
            <span class="highlight-icon">🎯</span>
            <span>5 fases metodológicas</span>
          </div>
          <div class="highlight-item">
            <span class="highlight-icon">⚖️</span>
            <span>4 principios transversales</span>
          </div>
          <div class="highlight-item">
            <span class="highlight-icon">🚀</span>
            <span>Enfoque iterativo y adaptativo</span>
          </div>
        </div>
      </div>
      
      <div *ngIf="getSelectedInfo()" class="selected-info">
        <div class="info-header">
          <div class="info-title-section">
            <span *ngIf="getSelectedInfo()?.icon" class="info-icon">{{ getSelectedInfo()?.icon }}</span>
            <h3 class="info-title">{{ getSelectedInfo()?.title }}</h3>
          </div>
          <button 
            class="close-btn" 
            (click)="clearSelection()"
            aria-label="Cerrar información"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <p class="info-description">{{ getSelectedInfo()?.description }}</p>
      </div>
    </div>
  </div>
</div>
